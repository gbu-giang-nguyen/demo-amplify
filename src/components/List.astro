---
import { preprocess } from "astro/zod";
import ListItem from "./ListItem.astro";
let data:any  = await new Promise((resolve, reject) => {
    fetch(import.meta.env.MICROCMS_API_ENDPOINT, {
        headers: {
            'X-MICROCMS-API-KEY': import.meta.env.MICROCMS_API_KEY,
        }
    })
        .then((res) => res.json())
        .then((d) => {
            resolve(d);
        })
});

---

<h3>Get list from microCMS</h3>

<div class="container">
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
        {data.contents.map((item:any) => <ListItem key={item.id} item={item} />)}
    </div>
</div>
